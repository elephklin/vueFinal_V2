(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2102cc"],{b789:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"container py-5"},[a("div",{staticClass:"row justify-content-center"},[t._m(0),a("div",{staticClass:"col-md-8"},[a("table",{staticClass:"table table-hover my-5 cart_table"},[t._m(1),a("tbody",t._l(t.cart.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("div",{staticClass:"d-flex justify-content-start"},[a("div",{staticClass:"imgSize",style:"background-image:url('"+e.product.imageUrl+"');"}),a("div",{staticClass:"align-self-center ml-4"},[a("span",{},[t._v(t._s(e.product.title))]),e.coupon?a("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):t._e()])])]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currency")(e.product.price))+" ")]),a("td",{staticClass:"align-middle"},[a("div",{staticClass:"d-flex justify-content-start text-center"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.qty,expression:"item.qty"}],staticClass:"form-control",attrs:{id:"cartNum"},on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"qty",a.target.multiple?s:s[0])},function(a){return t.changeCart(e.id,e.qty,e.product_id)}]}},t._l(20,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0),a("div",{staticClass:"align-self-center ml-3"},[t._v(" "+t._s(e.product.unit)+" ")])])]),a("td",{staticClass:"align-middle text-right"},[a("span",{},[t._v(t._s(t._f("currency")(e.product.price*e.qty)))])]),a("td",{staticClass:"align-middle text-center"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.removeCart(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])])])})),0),a("tfoot",[t.cart.final_total===t.cart.total?a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v(" 合計： "),a("span",[t._v(t._s(t._f("currency")(t.cart.total)))])])]):t._e(),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"text-right text-secondary",attrs:{colspan:"6"}},[t._v(" 折扣前合計："),a("span",[t._v(t._s(t._f("currency")(t.cart.total)))])])]):t._e(),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"h5 text-right",attrs:{colspan:"6"}},[t._v(" 折扣後合計："),a("span",{staticClass:"h4 text-danger"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])])]):t._e()])]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupons.code,expression:"coupons.code"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("code")},attrs:{name:"code",type:"text",required:"",placeholder:"請輸入優惠碼"},domProps:{value:t.coupons.code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.useCoupon(e)},input:function(e){e.target.composing||t.$set(t.coupons,"code",e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-major",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.useCoupon(e)}}},[t._v(" 套用優惠碼 ")])])]),t.errors.has("code")?a("div",{staticClass:"text-danger code_feedback"},[t._v(" 建議輸入優惠碼享折扣 ")]):t._e(),a("div",{staticClass:"d-flex justify-content-between mt-5"},[a("router-link",{staticClass:"btn btn-outline-major",attrs:{to:"/productlist/全部分類"}},[t._v("返回繼續購物")]),a("router-link",{staticClass:"btn btn-other",attrs:{to:"/order"}},[t._v("下一步")])],1)])])])],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-10"},[a("div",{staticClass:"row justify-content-around process_style"},[a("div",{staticClass:"col-md-3 p-2 rounded-pill process_now text-center"},[t._v(" 1.購物車內容 ")]),a("div",{staticClass:"col-md-3 p-2 rounded-pill process_undone text-center my-3 my-md-0"},[t._v(" 2.訂單填寫 ")]),a("div",{staticClass:"col-md-3 p-2 rounded-pill process_undone text-center"},[t._v(" 3.結帳 ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{},[a("tr",{},[a("th",{attrs:{width:"250"}},[t._v("商品資訊")]),a("th",{staticClass:"text-center",attrs:{width:"80"}},[t._v("單價")]),a("th",{staticClass:"text-center",attrs:{width:"80"}},[t._v("數量")]),a("th",{staticClass:"text-center",attrs:{width:"80"}},[t._v("小計")]),a("th",{staticClass:"text-center",attrs:{width:"60"}},[t._v("操作")])])])}],n=(a("99af"),{data:function(){return{isLoading:!1,quantity:1,cart:{carts:{}},coupons:{code:""}}},created:function(){var t=this;t.getCart()},methods:{getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("elephklin","/cart");t.isLoading=!0,t.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data),t.isLoading=!1}))},removeCart:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("elephklin","/cart/").concat(t);e.isLoading=!0,e.$http.delete(a).then((function(t){t.data.success&&(e.$bus.$emit("change_cart"),e.$bus.$emit("message:push",t.data.message,"success"),e.getCart(),e.isLoading=!1)}))},changeCart:function(t,e,a){var s=this,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("elephklin","/cart/").concat(t);s.isLoading=!0,s.$http.delete(c).then((function(t){var c={product_id:a,qty:e},n="".concat("https://vue-course-api.hexschool.io","/api/").concat("elephklin","/cart");s.$http.post(n,{data:c}).then((function(t){t.data.success&&(s.$bus.$emit("change_cart"),s.getCart())})),s.isLoading=!1}))},useCoupon:function(){var t=this;t.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("elephklin","/coupon");t.$http.post(e,{data:t.coupons}).then((function(e){e.data.success?(t.getCart(),t.isLoading=!1):(t.coupons.code="",t.isLoading=!1)}))}}}),i=n,o=a("2877"),r=Object(o["a"])(i,s,c,!1,null,null,null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d2102cc.26a5aa79.js.map