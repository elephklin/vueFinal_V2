{"version":3,"sources":["webpack:///./src/views/Cart.vue?6d0e","webpack:///src/views/Cart.vue","webpack:///./src/views/Cart.vue?ed00","webpack:///./src/views/Cart.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","_m","_l","cart","item","key","id","style","product","_v","_s","title","_e","_f","price","directives","name","rawName","value","expression","staticStyle","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","changeCart","qty","product_id","num","domProps","unit","preventDefault","removeCart","final_total","total","coupons","class","errors","has","type","indexOf","_k","keyCode","useCoupon","composing","staticRenderFns","data","quantity","carts","code","created","vm","getCart","methods","$http","get","api","then","res","success","delete","$bus","$emit","message","removeUrl","post","addUrl","component"],"mappings":"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","file":"js/chunk-2d2102cc.12ab9a6a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"cart__wrap\"},[_c('div',{staticClass:\"container py-5\"},[_c('div',{staticClass:\"row justify-content-center\"},[_vm._m(0),_c('div',{staticClass:\"col-sm-12 col-md-10\"},[_c('div',{staticClass:\"cart__table\"},[_c('table',{staticClass:\"table table-hover\"},[_vm._m(1),_c('tbody',_vm._l((_vm.cart.carts),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"align-middle\"},[_c('div',{staticClass:\"d-flex justify-content-start\"},[_c('div',{staticClass:\"imgSize img-fluid\",style:((\"background-image:url('\" + (item.product.imageUrl) + \"');\"))}),_c('div',{staticClass:\"align-self-center ml-sm-4\"},[_c('span',[_vm._v(_vm._s(item.product.title))]),(item.coupon)?_c('div',{staticClass:\"text-success\"},[_vm._v(\" 已套用優惠券 \")]):_vm._e()])])]),_c('td',{staticClass:\"align-middle text-right\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(item.product.price))+\" \")]),_c('td',{staticClass:\"align-middle\"},[_c('div',{staticClass:\"d-flex justify-content-start text-center\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.qty),expression:\"item.qty\"}],staticClass:\"form-control\",staticStyle:{\"text-align\":\"center\",\"text-align-last\":\"center\"},attrs:{\"id\":\"cartNum\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(item, \"qty\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){return _vm.changeCart(item.id, item.qty, item.product_id)}]}},_vm._l((20),function(num){return _c('option',{key:num,staticClass:\"text-center\",domProps:{\"value\":num}},[_vm._v(_vm._s(num))])}),0),_c('div',{staticClass:\"align-self-center ml-2 ml-sm-3\"},[_vm._v(\" \"+_vm._s(item.product.unit)+\" \")])])]),_c('td',{staticClass:\"align-middle text-right\"},[_c('span',{},[_vm._v(_vm._s(_vm._f(\"currency\")((item.product.price * item.qty))))])]),_c('td',{staticClass:\"align-middle text-center\"},[_c('button',{staticClass:\"btn btn-outline-danger btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeCart(item.id)}}},[_c('i',{staticClass:\"far fa-trash-alt\"})])])])}),0),_c('tfoot',[(_vm.cart.final_total === _vm.cart.total)?_c('tr',[_c('td',{staticClass:\"text-right\",attrs:{\"colspan\":\"6\"}},[_vm._v(\" 合計： \"),_c('span',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.total)))])])]):_vm._e(),(_vm.cart.final_total !== _vm.cart.total)?_c('tr',[_c('td',{staticClass:\"text-right text-secondary\",attrs:{\"colspan\":\"6\"}},[_vm._v(\" 折扣前合計：\"),_c('span',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.total)))])])]):_vm._e(),(_vm.cart.final_total !== _vm.cart.total)?_c('tr',[_c('td',{staticClass:\"h5 text-right\",attrs:{\"colspan\":\"6\"}},[_vm._v(\" 折扣後合計：\"),_c('span',{staticClass:\"h4 text-danger\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.final_total)))])])]):_vm._e()])])]),_c('div',{staticClass:\"input-group mb-3\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.coupons.code),expression:\"coupons.code\"},{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"form-control\",class:{ 'is-invalid': _vm.errors.has('code') },attrs:{\"name\":\"code\",\"type\":\"text\",\"required\":\"\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.coupons.code)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.useCoupon($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.coupons, \"code\", $event.target.value)}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-major\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.useCoupon($event)}}},[_vm._v(\" 套用優惠碼 \")])])]),(_vm.errors.has('code'))?_c('div',{staticClass:\"text-danger code__feedback\"},[_vm._v(\" 建議輸入優惠碼享折扣 \")]):_vm._e(),_c('div',{staticClass:\"d-flex justify-content-between mt-5\"},[_c('router-link',{staticClass:\"btn btn-outline-major\",attrs:{\"to\":\"/productlist/全部分類\"}},[_vm._v(\"返回繼續購物\")]),_c('router-link',{staticClass:\"btn btn-other\",attrs:{\"to\":\"/order\"}},[_vm._v(\"下一步\")])],1)])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-sm-12 col-md-10\"},[_c('ul',{staticClass:\"process_style\"},[_c('li',[_c('span',{staticClass:\"process_now\"},[_vm._v(\"1\")]),_c('p',[_vm._v(\"購物車內容\")])]),_c('li',[_c('span',{staticClass:\"process_undone\"},[_vm._v(\"2\")]),_c('p',[_vm._v(\"訂單填寫\")])]),_c('li',[_c('span',{staticClass:\"process_undone\"},[_vm._v(\"3\")]),_c('p',[_vm._v(\"結帳\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"商品資訊\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"單價\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"數量\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"小計\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"操作\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <div class=\"cart__wrap\">\r\n      <div class=\"container py-5\">\r\n        <div class=\"row justify-content-center\">\r\n          <div class=\"col-sm-12 col-md-10\">\r\n            <ul class=\"process_style\">\r\n              <li>\r\n                <span class=\"process_now\">1</span>\r\n                <p>購物車內容</p>\r\n              </li>\r\n              <li>\r\n                <span class=\"process_undone\">2</span>\r\n                <p>訂單填寫</p>\r\n              </li>\r\n              <li>\r\n                <span class=\"process_undone\">3</span>\r\n                <p>結帳</p>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"col-sm-12 col-md-10\">\r\n            <div class=\"cart__table\">\r\n              <table class=\"table table-hover\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\">商品資訊</th>\r\n                    <th scope=\"col\" class=\"text-center\">單價</th>\r\n                    <th scope=\"col\" class=\"text-center\">數量</th>\r\n                    <th scope=\"col\" class=\"text-center\">小計</th>\r\n                    <th scope=\"col\" class=\"text-center\">操作</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n                    <td class=\"align-middle\">\r\n                      <div class=\"d-flex justify-content-start\">\r\n                        <div\r\n                          class=\"imgSize img-fluid\"\r\n                          :style=\"\r\n                            `background-image:url('${item.product.imageUrl}');`\r\n                          \"\r\n                        ></div>\r\n                        <div class=\"align-self-center ml-sm-4\">\r\n                          <span>{{ item.product.title }}</span>\r\n                          <div class=\"text-success\" v-if=\"item.coupon\">\r\n                            已套用優惠券\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"align-middle text-right\">\r\n                      {{ item.product.price | currency }}\r\n                    </td>\r\n                    <td class=\"align-middle\">\r\n                      <div class=\"d-flex justify-content-start text-center\">\r\n                        <select\r\n                          style=\"text-align: center; text-align-last: center;\"\r\n                          id=\"cartNum\"\r\n                          class=\"form-control\"\r\n                          v-model=\"item.qty\"\r\n                          @change=\"changeCart(item.id, item.qty, item.product_id)\"\r\n                        >\r\n                          <option class=\"text-center\" :value=\"num\" v-for=\"num in 20\" :key=\"num\">{{ num }}</option>\r\n                        </select>\r\n                        <div class=\"align-self-center ml-2 ml-sm-3\">\r\n                          {{ item.product.unit }}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"align-middle text-right\">\r\n                      <span class>{{ (item.product.price * item.qty) | currency }}</span>\r\n                    </td>\r\n                    <td class=\"align-middle text-center\">\r\n                      <button\r\n                        type=\"button\"\r\n                        class=\"btn btn-outline-danger btn-sm\"\r\n                        @click.prevent=\"removeCart(item.id)\"\r\n                      >\r\n                        <i class=\"far fa-trash-alt\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n\r\n                <tfoot>\r\n                  <tr v-if=\"cart.final_total === cart.total\">\r\n                    <td colspan=\"6\" class=\"text-right\">\r\n                      合計：\r\n                      <span>{{ cart.total | currency }}</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-if=\"cart.final_total !== cart.total\">\r\n                    <td colspan=\"6\" class=\"text-right text-secondary\">\r\n                      折扣前合計：<span>{{ cart.total | currency }}</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-if=\"cart.final_total !== cart.total\">\r\n                    <td colspan=\"6\" class=\"h5 text-right\">\r\n                      折扣後合計：<span class=\"h4 text-danger\">{{ cart.final_total | currency }}</span>\r\n                    </td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </div>\r\n\r\n            <div class=\"input-group mb-3\">\r\n              <input\r\n                name=\"code\"\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                v-model=\"coupons.code\"\r\n                :class=\"{ 'is-invalid': errors.has('code') }\"\r\n                v-validate=\"'required'\"\r\n                required\r\n                placeholder=\"請輸入優惠碼\"\r\n                @keyup.enter=\"useCoupon\"\r\n              />\r\n              <div class=\"input-group-append\">\r\n                <button\r\n                  class=\"btn btn-outline-major\"\r\n                  @click.prevent=\"useCoupon\"\r\n                  type=\"button\"\r\n                >\r\n                  套用優惠碼\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div class=\"text-danger code__feedback\" v-if=\"errors.has('code')\">\r\n              建議輸入優惠碼享折扣\r\n            </div>\r\n\r\n            <div class=\"d-flex justify-content-between mt-5\">\r\n              <router-link class=\"btn btn-outline-major\" to=\"/productlist/全部分類\">返回繼續購物</router-link>\r\n              <router-link class=\"btn btn-other\" to=\"/order\">下一步</router-link>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      quantity: 1,\r\n      cart: {\r\n        carts: {}\r\n      },\r\n      coupons: {\r\n        code: ''\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    const vm = this\r\n    vm.getCart()\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      const vm = this\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM}/cart`\r\n      vm.isLoading = true\r\n      vm.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          vm.cart = res.data.data\r\n        }\r\n        vm.isLoading = false\r\n      })\r\n    },\r\n    removeCart (id) {\r\n      const vm = this\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM}/cart/${id}`\r\n      vm.isLoading = true\r\n      vm.$http.delete(api).then((res) => {\r\n        if (res.data.success) {\r\n          vm.$bus.$emit('change_cart')\r\n          vm.$bus.$emit('message:push', res.data.message, 'success')\r\n          vm.getCart()\r\n          vm.isLoading = false\r\n        }\r\n      })\r\n    },\r\n\r\n    changeCart (orderId, num, id) {\r\n      const vm = this\r\n      const removeUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM}/cart/${orderId}`\r\n      vm.isLoading = true\r\n      vm.$http.delete(removeUrl).then((res) => {\r\n        const changeData = {\r\n          product_id: id,\r\n          qty: num\r\n        }\r\n        const addUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM}/cart`\r\n\r\n        vm.$http.post(addUrl, { data: changeData }).then((res) => {\r\n          if (res.data.success) {\r\n            vm.$bus.$emit('change_cart')\r\n            vm.getCart()\r\n          }\r\n        })\r\n        vm.isLoading = false\r\n      })\r\n    },\r\n\r\n    useCoupon () {\r\n      const vm = this\r\n      vm.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM}/coupon`\r\n      vm.$http.post(api, { data: vm.coupons }).then((res) => {\r\n        if (res.data.success) {\r\n          vm.getCart()\r\n          vm.isLoading = false\r\n        } else {\r\n          vm.coupons.code = ''\r\n          vm.isLoading = false\r\n        }\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=69bfa68b&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}